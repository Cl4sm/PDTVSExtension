{
	"name": "PDT YAML",
	"scopeName": "source.pdt-yaml",
	"patterns": [
		{
			"include": "#template-block"
		},
		{
			"include": "#repo-kind"
		},
		{
			"include": "#repo-class"
		},
		{
			"include": "#repo-name"
		},
		{
			"include": "#metadata-naming"
		},
		{
			"include": "source.yaml"
		}
	],
	"repository": {
		"metadata-naming": {
			"begin": "^\\s+(key):",
			"beginCaptures": {
				"1": {
					"name": "entity.name.tag.yaml"
				}
			},
			"end": "$",
			"patterns": [
				{
					"match": "\\s*((\\w+)(?:\\.(\\w+))?(?:\\.(\\w+))?)",
					"captures": {
					  "1": {
						"name": "entity.name.type.enum"
					  },
					  "2": {
						"name": "entity.name.type.enum"
					  },
					  "3": {
						"name": "variable.other.templating.part2.yaml"
					  },
					  "4": {
						"name": "variable.other.templating.part3.yaml"
					  }
					}
				}
			]
		},
		"repo-class": {
			"match": "^\\s+(\\w+):\\s+(\\w+Repository)\\s*$",
			"captures": {
				"1": {
					"name": "entity.name.tag.yaml"
				},
				"2": {
					"name": "entity.name.class.yaml"
				}
			}
		},
		"repo-kind": {
			"begin": "^\\s+(kind):\\s+",
			"beginCaptures": {
				"1": {
					"name": "entity.name.tag.yaml"
				}
			},
			"end": "(\\w+)\\s*$",
			"endCaptures": {
				"0": {
					"name": "entity.name.variable.yaml"
				}
			}
		},
		"repo-name": {
			"begin": "^\\s+(repo):\\s+",
			"beginCaptures": {
				"1": {
					"name": "entity.name.tag.yaml"
				}
			},
			"end": "(\\w+)\\s*$",
			"endCaptures": {
				"0": {
					"name": "entity.name.class.yaml"
				}
			}
		},
		"template-block": {
			"begin": "^\\s*(template)\\s*:\\s*\\|",
			"beginCaptures": {
				"1": {
					"name": "entity.name.tag.yaml"
				}
			},
			"end": "^\\s*(\\w+):\\s*$",
			"endCaptures": {
				"1": {
					"name": "entity.name.tag.yaml"
				}
			},
			"patterns": [
				{
					"include": "#variable-templating"
				},
				{
					"include": "source.shell"
				}
			]
		}
	}
}